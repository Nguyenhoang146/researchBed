<HTML xmlns:h="http://java.sun.com/jsf/html">

<HEAD>

    <script src="blockly/blockly_compressed.js"></script>

    <script src="blockly/blocks/logic.js"></script>
    <script src="blockly/blocks/loops.js"></script>
    <script src="blockly/blocks/math.js"></script>
    <script src="blockly/blocks/text.js"></script>
    <script src="blockly/blocks/lists.js"></script>
    <script src="blockly/blocks/colour.js"></script>
    <script src="blockly/blocks/variables.js"></script>
    <script src="blockly/blocks/procedures.js"></script>
    
    <script src="blockly/javascript_compressed.js"></script>

    <script src="blockly/msg/js/en.js"></script>       

<TITLE>SSL2SQL</TITLE>
<style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</HEAD>

<BODY BGCOLOR="FFFFFF">
	<h:form id="unique-form" styleClass="ui-g-12">
		<div class="ui-g-12" style="padding-bottom: 20px;">
			<h2 style="margin-top: 0">Scripting Structure Language to Procedural Language SQL (SSL2PLSQL)</h2>
			<p>
			This web service is intended for readers of my thesis:
			<b>A Web-based Validator For Data Constraints</b>
			</p>
			<h:inputText id="hidden-result" style="display: none;"/>
			<h:commandButton style="margin-right: 10px;" styleClass="ui-g-12" 
			onclick="genDataScript();" value="Generate" action="#{ssl2plsqlBean.genData}"/>
          	<h:commandButton type="button" styleClass="ui-g-12" onclick="help();" value="Help!"/>
        </div>
      
        <div class="ui-g-12" style="height: 80%;">
      		<div id="blocklyDiv" style="display: inline-block; width: 60%; float:left;"></div>
      		<div style="float: left; width: 30%;">
	      		<h:inputTextarea style="display: inline-block; height: 50%; width: 100%; resize: none;" id="data-model" 
	      		value="JSON Data model:"/>
	      		<h:inputTextarea id="appear-result" disabled="true" 
	      		style="display: inline-block; height: 50%; width: 100%; resize:none;" value="SSL output:"/>
      		</div>
	  	</div>
      
        <xml id="toolbox" style="display: none">

          <!-- <category name="Starter">
                  <block type="list_statements"></block>
          </category> -->
          
          <category name="Action">
                  <block type="action_add"/>
                  <block type="action_do"/>
                  <block type="action_update"/>
                  <block type="action_update_where"/>
          </category>
          <category name="Logic">
              <block type="logic_compare"/>
              <block type="logic_operation"/>
          </category>
          <category name="Input">
            <block type="math_number"/>
            <block type="text"/>
            <block type="class_string"/>
            <block type="attribute_string"/>
          </category>
              
        </xml>
              <xml id="startBlocks" style="display: none">
                <block type="list_statements" inline="false" x="50" y="50" deletable="false"></block>
              </xml>
           </h:form>
           <script>
                var demoWorkspace = Blockly.inject('blocklyDiv',
                    {media: 'blockly/media/',
                     toolbox: document.getElementById('toolbox'),
                     zoom:
                    {controls: true,
                      wheel: false,
                      startScale: 1.0,
                      maxScale: 3,
                      minScale: 0.3,
                      scaleSpeed: 1.2}
                     });
                	Blockly.Xml.domToWorkspace(document.getElementById('startBlocks'),
                                           demoWorkspace);
                function genDataScript() {
                  // Generate JavaScript code and display it.
                  Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
                  var input = document.getElementById('unique-form:hidden-result');
                  input.value = Blockly.JavaScript.workspaceToCode(demoWorkspace);
                }
                function help() {
                    // Generate JavaScript code and display it.
                	Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
                    var input = document.getElementById('unique-form:appear-result');
                    input.value = 'SSL output:\n====================================\n' + Blockly.JavaScript.workspaceToCode(demoWorkspace);
                }
              </script>
            </BODY>
            </HTML>
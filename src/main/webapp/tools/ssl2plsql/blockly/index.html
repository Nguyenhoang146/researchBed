<HTML>

<HEAD>

        <script src="blockly_compressed.js"></script>

        <script src="blocks/logic.js"></script>
        <script src="blocks/loops.js"></script>
        <script src="blocks/math.js"></script>
        <script src="blocks/text.js"></script>
        <script src="blocks/lists.js"></script>
        <script src="blocks/colour.js"></script>
        <script src="blocks/variables.js"></script>
        <script src="blocks/procedures.js"></script>
        
        <script src="javascript_compressed.js"></script>

        <script src="msg/js/en.js"></script>        

<TITLE>SSL2SQL</TITLE>
<style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</HEAD>

<BODY BGCOLOR="FFFFFF">

        <p>
          <button onclick="genDataScript()">Generate data script</button>
          <button onclick="help()">Help!</button>
        </p>
      
        <div id="blocklyDiv" style="height: 600px; width: 1000px;"></div>
      
        <xml id="toolbox" style="display: none">

          <!-- <category name="Starter">
                  <block type="list_statements"></block>
          </category> -->
          
          <category name="Action">
                  <block type="action_add"/>
                  <block type="action_do"/>
                  <block type="action_update"/>
          </category>

          <category name="Input">
              <block type="math_number"/>
              <block type="class_string"/>
              <block type="attribute_string"/>
              <block type="logic_compare"/>
              <block type="logic_operation"/>
          </category>
              
      </xml>
            
              <xml id="startBlocks" style="display: none">
                <block type="list_statements" inline="false" x="300" y="200" deletable="false"></block>
              </xml>
            
              <script>
                var demoWorkspace = Blockly.inject('blocklyDiv',
                    {media: 'media/',
                     toolbox: document.getElementById('toolbox')});
                Blockly.Xml.domToWorkspace(document.getElementById('startBlocks'),
                                           demoWorkspace);
            
                function genDataScript() {
                  // Generate JavaScript code and display it.
                  Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
                  var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
                  // var request = new XMLHttpRequest()

                  // console.log('Hello');
                  // // Open a new connection, using the GET request on the URL endpoint
                  // request.open('GET', 'https://ghibliapi.herokuapp.com/films', true)
                  
                  // request.onload = function () {
                  //   // Begin accessing JSON data here
                  // }
                  
                  // // Send request
                  // request.send()
                  // var data = JSON.parse(this.response)

                  // data.forEach(movie => {
                  //   // Log each movie's title
                  //   console.log(movie.title)
                  // })
                }
                function help() {
                  // Generate JavaScript code and display it.
                  Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
                  var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
                  alert('Current statements will generate:\n' + code)
                }
              </script>
            
            </body>
            </html>